"use strict";class dataList{constructor(t){this.$target=$(t.targetSelector),this.className=void 0!==t.className?t.className:"cards",this.url=void 0!==t.url?t.url:"//contest.elecard.ru/frontend_data/",this.targetFile=void 0!==t.file?t.file:"catalog.json",this.fishText="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce quis ipsum euismod, vulputate velit a, elementum velit.",this.data=[]}init(){let t=this;t.$target.addClass(t.className),$.getJSON(t.url+t.targetFile,"",function(e){t.data=e,t.pager=new Pagination({items:t.data}),t.pager.init(),t.renderPage()})}renderPage(){let t=this,e=[],s=t.pager.current*t.pager.perPage-1;for(let a=t.pager.current*t.pager.perPage-t.pager.perPage;a<s;a++){let s=t.data[a];e.push($("<div>",{class:t.className+"__item",html:[$(`<div class="${t.className}__image"><img src="${t.url+s.image}" /></div>`),$(`<p class="${t.className}__description">${s.description?t.fishText:""}</p>`),$("<button/>",{type:"button",class:`${t.className}__button-close`,text:"x"}).data("id",a).attr("data-id",a).on("click",function(){t.closeCard($(this).data("id"))})]}).data("id",a).attr("data-id",a))}t.$target.html(e),t.$target.after(t.pager.$element)}closeCard(t){$(`.${this.className}__item[data-id="${t}"]`).addClass(`${this.className}_closed`)}update(){}}class Pagination{constructor(t){this.items=t.items,this.perPage=void 0!==t.numItems?t.numItems:12,this.className=void 0!==t.className?t.className:"pagination",this.numPages=parseInt(this.items.length/this.perPage),this.current=1}init(){let t=this;t.$first=$("<button/>",{type:"button",class:`${t.className}__first`,text:"|<"}).on("click",function(){t.update(1)}),t.$prev=$("<button/>",{type:"button",class:`${t.className}__pref`,text:"<<"}).on("click",function(){t.update(t.current-1)}),t.$next=$("<button/>",{type:"button",class:`${t.className}__next`,text:">>"}).on("click",function(){t.update(t.current+1)}),t.$last=$("<button/>",{type:"button",class:`${t.className}__last`,text:">|"}).on("click",function(){t.update(t.numPages)}),t._updateProp(),t.$current=$(`<span type="button" class="${t.className}__current">${t.current}</span>`),t.$element=$("<div/>",{class:this.className,html:[t.$first,t.$prev,t.$current,t.$next,t.$last]})}update(t){(t>=1||t<=this.numPages)&&(this.current=t,this.$current.text(this.current),this._updateProp())}_updateProp(){this.$first.prop("disabled",!(this.current>1)),this.$prev.prop("disabled",!(this.current>1)),this.$next.prop("disabled",this.current>=this.numPages),this.$last.prop("disabled",this.current>=this.numPages)}}$(document).ready(function(){new dataList({targetSelector:".js-data-list"}).init()});